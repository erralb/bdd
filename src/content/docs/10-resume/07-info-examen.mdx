---
title: Informations sur l'examen
description: Informations sur les examens
sidebar:
  label: Examen
---

import Slide from '/src/components/Slide.astro';

<Slide>

Dans les grandes lignes, l'examen portera sur tous les concepts et les comp√©tences abord√©s dans les cours de base de bases de donn√©es relationnelles et SQL.

## Format de l'examen

- **Dur√©e** : 2 heures
- **Type** : Questions de cours et exercices pratiques
- **Supports autoris√©s** : 1 copie double (ou 2 feuilles volantes) **manuscrite** :
    - Pas de photocopies, ni de documents imprim√©s : Tout document non manuscrit sera consid√©r√© comme une **tentative de fraude**.
    - Pas de t√©l√©phone portable, de montre connect√©e, d'ordinateur, de tablette, de calculatrice programmable, de cl√© USB, etc.
- **Identification** : Vous devez √™tre en possession de votre **carte d'√©tudiant** et d'une **pi√®ce d'identit√©** valide pour pouvoir passer l'examen et me rendre votre travail

</Slide>
<Slide>

## Contenus types de l'examen :

- Questions de cours
- Normalisation (1NF, 2NF, 3NF) et d√©composition
- Alg√®bre relationnelle
- Ecriture en langages SQL : DQL, DML, DDL, TCL
    - DQL : Requ√™tes simples, jointures, sous-requ√™tes, agr√©gation, groupement, tri
    - DML : Insertion, mise √† jour, suppression
    - DDL : Cr√©ation de tables, contraintes, vues, triggers, proc√©dures stock√©ess
    - TCL : Transactions, jalons (savepoints)

</Slide>
<Slide>

## Exemples de questions de cours

1. Qu'est-ce que la normalisation des bases de donn√©es ? Quels sont les avantages de la normalisation ? Expliquez les trois premi√®res formes normales (1NF, 2NF, 3NF).
2. Qu'est-ce que l'alg√®bre relationnelle ? Quels sont les op√©rateurs de l'alg√®bre relationnelle ?
3. Quelles sont les sous langages du SQL ? Quelles parties du SQL adressent-ils ?
4. Qu'est-ce qu'un d√©clencheur (trigger) en SQL ?
5. Qu'est-ce qu'une transaction en SQL ?
6. Qu'est-ce qu'une proc√©dure stock√©e en SQL ?
7. Qu'est-ce qu'une vue en SQL ?
8. Que signifie l'acronyme ACID en base de donn√©es ? Expliquez chaque propri√©t√©.
9. Quelle fonction SQL permet de compter le nombre de lignes d'une table ?

</Slide>
<Slide>

## Exemple d'exercice de normalisation

Soit la relation `boutique` non normalis√©e suivante :

```ansi wrap frame="none"
boutique (numeroClient, nomClient, numeroCommande, dateCommande, quantiteDetail, numeroProduit, nomProduit, prixProduit)
```

Ainsi que les donn√©es suivantes :

import Table from '/src/components/Table.astro';

<Table
    title='Boutique'
    headers={['numeroClient', 'nomClient', 'numeroCommande', 'dateCommande', 'quantiteDetail', 'numeroProduit', 'nomProduit', 'prixProduit']}
    rows={[
        [1, 'Alice', 1, '2022-01-01', 2, 1, 'Pomme', 1.5],
        [1, 'Alice', 1, '2022-01-01', 3, 2, 'Poire', 2.0],
        [2, 'Bob', 2, '2022-01-02', 1, 1, 'Pomme', 1.5],
        [2, 'Bob', 2, '2022-01-02', 2, 2, 'Poire', 2.0],
    ]}
/>

Normaliser la relation `boutique` en 3·µâ forme normale (3NF) en justifiant vox choix

<details>

<summary>Solution</summary>

En observant les donn√©es de la relation, on peut d√©duire que les d√©pendances fonctionnelles suivantes :

```
numeroClient -> nomClient
numeroCommande -> dateCommande
numeroCommande, numeroProduit -> quantiteDetail
numeroProduit -> nomProduit, prixProduit
```

Et que `numeroCommande, numeroProduit` est une cl√© candidate de la relation car il permet d'identifier de mani√®re unique chaque ligne.

#### 1√®re forme normale (1NF)

La relation `boutique` est en 1·µâ forme normale (1NF) car elle contient des valeurs atomiques.

#### 2√®me forme normale (2NF)

Rappel sur le non-respect de la 2·µâ forme normale (2NF) :

![Non-respect de la 2FN](../01-concepts/07-normalisation-01-Relation-Non-Respect-2FN.svg)
> Si un attribut ne fait pas partie de la cl√©, il ne doit pas d√©pendre fonctionnellement d'une partie de la cl√©

La relation `boutique` n'est donc pas en 2·µâ forme normale (2NF) car :

- `nomProduit`et `prixProduit` ne d√©pendent pas de la cl√© candidate `numeroCommande, numeroProduit` mais de `numeroProduit` uniquement
- `dateCommande` ne d√©pend pas de la cl√© candidate `numeroCommande, numeroProduit` mais de `numeroCommande` uniquement

#### 3√®me forme normale (3NF)

Rappel sur le non-respect de la 3·µâ forme normale (3NF) :

![Non-respect de la 3FN](../01-concepts/07-normalisation-02-Relation-Non-Respect-3FN.svg)
> Si un attribut ne fait pas partie de la cl√©, il ne doit pas d√©pendre fonctionnellement d'un autre attribut non-cl√©

La table `boutique` n'est pas en 3·µâ forme normale (3NF) car :

- `nomClient` d√©pend d‚Äôun attribut non-cl√© `numeroClient`

#### D√©composition

La table `boutique` doit donc √™tre d√©compos√©e en plusieurs relations pour respecter la 3·µâ forme normale (3NF) :

```ansi frame="none"
[1mClients[0m ([4mnumeroClient[0m, nomClient)
[1mCommandes[0m ([4mnumeroCommande[0m, dateCommande, numeroClient*)
[1mDetailsCommandes[0m ([4mnumeroCommande*[0m, numeroProduit*[0m, quantiteDetail)
[1mProduits[0m ([4mnumeroProduit[0m, nomProduit, prixProduit)
```

</details>

</Slide>
<Slide>

## Exemple d'exercices d'alg√®bre relationnelle et de SQL

Soit la base de donn√©es `Banque` suivante :

#### Format textuel : 

```ansi frame="none"
[1mComptes[0m ([4mid[0m, solde, id_client*)
[1mClients[0m ([4mid[0m, nom, prenom, id_employe*)
[1mEmployes[0m ([4mid[0m, nom, prenom, id_manager*)
[1mEmployes_Clients[0m ([4mid_client* id_employe*[0m,)
[1mOperations[0m ([4mid[0m, id_compte, montant, date, type)
```

#### Diagramme entit√©-association :

```mermaid
---
title: Banque
---
erDiagram

Comptes ||--o{ Clients : "appartiennent √†"
Comptes ||--o{ Operations : "ont des"
Clients ||--o{ Operations : "ont des"
Employes }o--o{ Clients : "g√®rent des"
Employes ||--|| Employes : "manager"
```

#### Exemple de donn√©es :

<div class="tables-2-col">

<Table
    title='Comptes'
    headers={['id', 'solde', 'id_client']}
    rows={[
        [1, 1000, 1],
        [2, 2000, 2],
        [3, 10000, 2],
    ]}
/>

<Table
    title='Clients'
    headers={['id', 'nom', 'prenom']}
    rows={[
        [1, 'Alice', 'Dupont'],
        [2, 'Bob', 'Martin'],
        [3, 'Lucie', 'Olivier'],
    ]}
/>

<Table
    title='Employes'
    headers={['id', 'nom', 'prenom', 'id_manager']}
    rows={[
        [1, 'Charlie', 'Durand', 2],
        [2, 'David', 'Lefevre', 'NULL'],
        [3, 'Eva', 'Girard', 2],
    ]}
/>

<Table
    title='Employes_Clients'
    headers={['id_client', 'id_employe']}
    rows={[
        [1, 1],
        [2, 1],
        [2, 2],
    ]}
/>

<Table
    title='Operations'
    headers={['id', 'id_compte', 'montant', 'date', 'type']}
    rows={[
        [1, 1, 100, '2022-01-01', 'D√©p√¥t'],
        [2, 1, 50, '2022-01-02', 'Retrait'],
        [3, 2, 200, '2022-01-03', 'D√©p√¥t'],
        [4, 3, 1000, '2022-01-04', 'D√©p√¥t'],
    ]}
/>

</div>

</Slide>
<Slide>

### Alg√®bre relationnelle

√âcrire les requ√™tes alg√©briques suivantes :

1. Afficher le nom, pr√©nom et le solde de chaque compte de chaque client.
2. Afficher les clients g√©r√©s par l'employ√© "Charlie Durand".
3. Afficher les employ√©s qui ne g√®rent aucun client.
4. Afficher les clients qui n'ont pas de compte.
5. Afficher les clients qui ont effectu√© des op√©rations de type "D√©p√¥t".
6. Afficher les employ√©s qui g√®rent tous les clients

</Slide>
<Slide>

### SQL

#### Exercice de conversion d'alg√®bre relationnelle en SQL

√âcrire les requ√™tes SQL correspondantes aux requ√™tes alg√©briques pr√©c√©dentes.

#### Exercice de cr√©ation de vues, triggers et proc√©dures stock√©es

1. √âcrire le code SQL pour cr√©er une vue nomm√©e `VueComptesClients` qui affiche le nom, pr√©nom et le solde de chaque compte de chaque client.
2. √âcrire une requ√™te SQL pour afficher le contenu de la vue `VueComptesClients`.
3. √âcrire un trigger SQL qui met √† jour le solde du compte apr√®s chaque op√©ration de type "D√©p√¥t" ou "Retrait".
4. √âcrire une proc√©dure stock√©e SQL qui affiche le solde d'un compte donn√©.

#### Exercice de DDL et TCL

1. √âcrire le code SQL pour cr√©er une table nomm√©e `ComptesArchives` qui contient les comptes archiv√©s.
2. √âcrire une requ√™te SQL pour ins√©rer tous les comptes dans la table `ComptesArchives` depuis un `SELECT` sur la table `Comptes`.
3. √âcrire une requ√™te SQL pour supprimer tous les comptes archiv√©s de la table `ComptesArchives`.

</Slide>
<Slide>

## Conclusion

- L'examen portera sur tous les concepts et les comp√©tences abord√©s dans les cours de base de bases de donn√©es relationnelles et SQL.
- Les supports autoris√©s sont limit√©s √† 1 copie double (ou 2 feuilles volantes) manuscrite.
- Vous devez √™tre en possession de votre carte d'√©tudiant et d'une pi√®ce d'identit√© valide pour pouvoir passer l'examen et me rendre votre travail.
- Les exercices d'examen seront similaires √† ceux abord√©s dans les TD et les TP.
- Les exercices pr√©sent√©s ici ne sont que des exemples et seront adapt√©s pour la dur√©e de l'examen.
- La note de l'examen comptera pour une partie importante de votre note finale : 60% contre 40% pour le TP not√©.
- Si vous avez travaill√© r√©guli√®rement en TD et en TP, vous devriez r√©ussir l'examen !

</Slide>
