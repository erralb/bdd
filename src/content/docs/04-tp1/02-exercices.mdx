---
title: TP1 - Alg√®bre Relationnelle et SQL
sidebar:
  label: Exercices
---

import Slide from "/src/components/Slide.astro";

<Slide>

## Description du sch√©ma

On consid√®re le sch√©ma relationnel nomm√© `Bazar` d√©fini par les trois relations suivantes, o√π les cl√©s primaires sont <u>soulign√©es</u> et les cl√©s √©trang√®res sont indiqu√©es avec un ast√©risque `*` :

```ansi wrap
PRODUIT ([4mNPRO[0m, NOMP, QTP, COULEUR)
```

La relation `PRODUIT` d√©crit chaque produit identifi√© par son num√©ro `NPRO`, son nom `NOMP`, sa quantit√© `QTP` disponible en stock et sa couleur `COULEUR`.

```ansi wrap
VENTE ([4mNVEN[0m, NOMC, NPRV*, QTV, DATEV)
```

La relation `VENTE` d√©crit toutes les ventes de produits r√©alis√©es.

Pour chaque vente, identifi√©e par son num√©ro `NVEN`, on conserve le nom du client `NOMC` le num√©ro du produit vendu `NPRV`, la quantit√© `QTV` de produit vendu ainsi que la date `DATEV` de la vente.

```ansi wrap
ACHAT ([4mNACH[0m, NOMF, NPRA*, QTA, DATEA)
```

La relation `ACHAT` d√©crit les commandes de produits aux fournisseurs.

Pour chaque achat, identifi√© par son num√©ro `NACH`, on donne le nom du fournisseur `NOMF`, le num√©ro du produit command√© `NPRA`, la quantit√© command√©e `QTA` ainsi que la date `DATEA` √† laquelle le produit a √©t√© command√©.

</Slide>
<Slide>

Les domaines de valeurs associ√©s aux diff√©rents attributs sont :

```sql wrap
- domaine(NOMP) = {"chaussette", "casserole", "t√©l√©phone", etc.}
- domaine(NOMC) = {"John", "Catherine", "Alphonse", etc.}
- domaine(NOMF) = {"Darty", "LaRedoute", "Carefour", etc.}
- domaine(COULEUR) = {"rouge", "vert", "bleu", etc.}
- domaine(NPRO) = domaine(NVEN) = domaine(NACH) = domaine(NPRV) = domaine(NPRA) = domaine(QTP) = domaine(QTV) = domaine(QTA) = entiers ‚â• 0
- domaine(DATE) = date
```

</Slide>
<Slide>

Les contraintes d‚Äôint√©grit√© r√©f√©rentielle sont :

```
VENTE[NPRV] ‚äÜ PRODUIT[NPRO]
ACHAT[NPRA] ‚äÜ PRODUIT[NPRO]
```

_Autrement dit, les colonnes `NPRV` et `NPRA` sont des cl√©s √©trang√®res pointant vers la table `PRODUIT`. On peut remarquer que les cl√©s √©trang√®res n'ont pas besoin d'√™tre nomm√©es de la m√™me mani√®re que les cl√©s primaires._

</Slide>
<Slide>

### Diagramme Entit√©-Association

import {Content as Bazar} from '../../files/bazar-mermaid.md'

<Bazar />

</Slide>
<Slide>

import Table from "/src/components/TableSQLite.astro";

<details>
<summary>Donn√©es de la base de donn√©es</summary>

    <div class="tables tables-3-col">

        <Table
        sqliteDB="public/sample/bazar.sqlite"
        title="PRODUIT"
        query="SELECT * FROM PRODUIT"
        />

        <Table
        sqliteDB="public/sample/bazar.sqlite"
        title="ACHAT"
        query="SELECT * FROM ACHAT"
        />

        <Table
        sqliteDB="public/sample/bazar.sqlite"
        title="VENTE"
        query="SELECT * FROM VENTE"
        />

    </div>

</details>

</Slide>
<Slide>

## √âcriture de requ√™tes

_Si ce n'est pas d√©j√† fait, installez [SQLite Studio](https://sqlitestudio.pl/) et ouvrez la base de donn√©es [bazar.sqlite](/bdd/public/sample/bazar.sqlite) pour tester vos requ√™tes. <br/> Si pour une raison ou une autre vous ne pouvez pas installer SQLite et SQLite Studio, vous pouvez √©galement utiliser [le compilateur en ligne du site](/bdd/sql-compiler/02-bazar/) pour tester vos requ√™tes._

R√©digez, d'abord en alg√®bre relationnelle lorsque cela est possible, puis en SQL les requ√™tes suivantes :

1. Donner les noms et couleurs de tous les produits

2. Donner les noms et quantit√©s en stock des produits de couleur rouge

3. Donner les num√©ros de vente, le nom du client, la quantit√© vendue pour les ventes du produit de nom ¬´ torchon ¬ª, r√©alis√©es avant le 12/09/87

4. Donner les noms des clients ayant achet√© au moins un produit de couleur vert

5. Donner les noms des fournisseurs qui sont √©galement des clients

6. Donner les noms des fournisseurs qui fournissent les produits de couleur bleue et dont la quantit√© en stock (actuellement) est inf√©rieur √† 100

7. Donner le nom des fournisseurs avec lesquels aucune commande de produit n‚Äôa √©t√© r√©alis√©e depuis le 30/06/87

8. Donner pour chaque produit, les noms des fournisseurs du produit et les noms des clients l‚Äôayant achet√©

9. Donner les noms des clients ayant achet√© au moins une fois de tous les produits disponibles

10. Donner les noms des fournisseurs qui fournissent tous les produits

11. Donner, pour chaque couleur, le nombre de produits de cette couleur

12. Donner le nom et le nombre des produits vendus lors de la plus grosse vente.

## Rendu

1. Sauvegardez vos requ√™tes SQL dans **un seul fichier** `.sql`
2. Ajouter des impressions d'√©cran de vos r√©sultats de requ√™tes dans un document PDF
3. Cr√©ez une archive zip avec ces deux fichiers, puis d√©posez la sur Moodle.

</Slide>
