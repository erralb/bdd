---
title: TD2
description: Exercices d'algÃ¨bre relationelle
---

## 1. Description du problÃ¨me

Une agence de voyages veut informatiser la gestion des voyages quâ€™elle propose (itinÃ©raires, monuments visitÃ©s, rÃ©servations, etc.). 

Une base de donnÃ©es doit Ãªtre construite Ã  partir du cahier des charges suivant : 


* **Les circuits** : un circuit est identifiÃ© par un numÃ©ro, un nombre dâ€™Ã©tapes et une sÃ©quence dâ€™Ã©tapes. Une Ã©tape se dÃ©roule pendant un nombre donnÃ© de jours, dans une ville donnÃ©e. Au cours de chaque Ã©tape, tous les monuments de la ville, lorsquâ€™il y en a, sont visitÃ©s. Un mÃªme circuit ne repasse jamais plusieurs fois dans la mÃªme ville, mais il peut arriver que la ville de dÃ©part ou dâ€™arrivÃ©e figure aussi parmi les villes Ã©tapes. Les villes sont identifiÃ©es par leurs noms. Les monuments sont identifiÃ©s par leurs noms dans la ville oÃ¹ ils sont situÃ©s. 

    Un circuit peut Ãªtre programmÃ© plusieurs fois, Ã  des dates diffÃ©rentes. A chacune de ces programmations, on associe un nombre de places. Deux programmations dâ€™un mÃªme circuit peuvent avoir des nombres de places diffÃ©rents. Par contre, le prix dâ€™un circuit est toujours le mÃªme quelle que soit sa date de programmation. La durÃ©e dâ€™un circuit est Ã©gale Ã  la somme des durÃ©es de chacune de ces Ã©tapes ; 
* **Les rÃ©servations** : une rÃ©servation, identifiÃ©e par un numÃ©ro, est effectuÃ©e pour le compte dâ€™un client (identifiÃ© par son nom) et concerne une programmation dâ€™un circuit. Plusieurs places pour la mÃªme programmation du mÃªme circuit peuvent Ãªtre rÃ©servÃ©es en une seule fois.

## 2. SchÃ©ma des tables

Le schÃ©ma retenu pour la base de donnÃ©es est constituÃ© des relations suivantes ; 

_Par convention, on <u>souligne</u> les clÃ©s primaires et on indique les clÃ©s Ã©trangÃ¨res avec un astÃ©risque *_

```ansi wrap
VILLE ([4mNOMV[0m, PAYS)
{(n, p) âˆˆ VILLE â†” la ville dont le nom est n, est situÃ©e dans la pays p}

MONUMENT ([4mNOMM[0m, NOMV*, PRIX)
{(nm, nv, p) âˆˆ MONUMENT â†” le monument de nom nm est situÃ© dans la ville nv. La visite coÃ»te p francs}

CIRCUIT ([4mNC[0m, NBETAPES, PRIX)
{(nc, nb, p) âˆˆ CIRCUIT â†” le circuit est identifiÃ© par le numÃ©ro nc. Il comprend nb Ã©tapes et vaut p francs}

ETAPE (NOMV, [4mNC, NUMETAPE[0m, DUREE)
{(nv, nc, nu, no, d) âˆˆ ETAPE â†” la ville nv est la nu iÃ¨me Ã©tape du circuit nc. Lâ€™Ã©tape dure d jours}

PROGRAMMATION ([4mNC, DATE[0m, PLACES)
{(nc, d, p) âˆˆ P ROGRAMMATION â†” le circuit nc est programmÃ© Ã  la date d. P places sont disponibles}

RESERVATION (NC, NR, NOMC, PLACES, DATE)
{(nc, nr, c, p, d) âˆˆ RESERVATION â†” le client de nom c a rÃ©servÃ© p places pour le circuit nc commenÃ§ant Ã  la date d. Sa rÃ©servation est identifiÃ©e par le numÃ©ro nr}
```

Les domaines associÃ©s aux diffÃ©rents attributs sont :

```sql wrap
domaine(NOMC) = {â€œMilaâ€, â€œNathalieâ€, â€œJohnâ€, etc.}
domaine(NOMV) = {â€œParisâ€, â€œLondresâ€, â€œExeterâ€, etc.}
domaine(PAYS) = {â€œFranceâ€, â€œAngleterreâ€, â€œIrlandeâ€, etc.}
domaine(NC) = domaine(NR) = domaine(PLACES) = domaine(PRIX) = domaine(NUMETAPE) = domaine(NBETAPES) = domaine(DUREE) = entiers â‰¥ 0
domaine(DATE) = dates
```

Les contraintes dâ€™intÃ©gritÃ© rÃ©fÃ©rentielle () sont :

```
RESERVATION[NC, DATE] âŠ‚ PROGRAMMATION[NC, DATE]
CIRCUIT[NC] = PROGRAMMATION[NC]
CIRCUIT[NC] = ETAPE[NC]
VILLE[NOMV] = ETAPE[NOMV]
MONUMENT[NOMV] âŠ‚ VILLE[NOMV]
```

{/* <div class="masonry">
    ![Table VILLE](06-td2-algebre-06-Table-VILLE.png)
    ![Table MONUMENT](06-td2-algebre-03-Table-MONUMENT.png)
    ![Table CIRCUIT](06-td2-algebre-01-Table-CIRCUIT.png)
    ![Table ETAPE](06-td2-algebre-05-Table-ETAPE.png)
    ![Table PROGRAMMATION](06-td2-algebre-02-Table-PROGRAMMATION.png)
    ![Table RESERVATION](06-td2-algebre-04-Table-RESERVATION.png)
</div> */}

<div class="page-break"></div>

## 3. DonnÃ©es de la base de donnÃ©es

![Tables 1, 2 et 3](06-td2-algebre-01-Tables-123.png)
![Tables 4, 5 et 6](06-td2-algebre-02-Tables-456.png)

<div class="page-break"></div>
<div class="page-break"></div>

## 4. Navigation dans la base de donnÃ©es

Trouver les informations suivantes dans la base de donnÃ©es :

1. Ville de dÃ©part du circuit 10 ?
2. Noms des monuments visitÃ©s par Mafalda ?
3. Nombre de places mises Ã  la vente pour le circuit 5 Ã  la date du 9/11/02 ?

## 5. RequÃªtes

Donner en algÃ¨bre relationnelle lâ€™expression des requÃªtes suivantes :

1. Ville de dÃ©part du circuit 10 ?
2. Noms des monuments visitÃ©s par Mafalda ?
3. Donner le numÃ©ro, les villes de dÃ©part et dâ€™arrivÃ©e des circuits qui dÃ©marrent aprÃ¨s une date donnÃ©e ;
4. Donner les noms des clients qui ont rÃ©servÃ© des circuits qui passent par un pays donnÃ© ;
5. Donner le nom des clients qui ne visitent aucun monument ;
6. Donner le numÃ©ro, le prix de base (i.e. ne tenant pas compte du prix des monuments visitÃ©s), et la date de dÃ©part des circuits qui ont encore des places disponibles ;
7. Donner le numÃ©ro et le prix de base des circuits qui nâ€™ont aucune rÃ©servation ;
8. Donner les noms des pays, des villes et des monuments visitÃ©s par un client donnÃ© ;
9. Donner la liste des numÃ©ros de circuits qui passent dans toutes les villes dâ€™un pays donnÃ©
10. Pour chaque circuit restant dans le mÃªme pays, donner le nom de ce pays et le numÃ©ro de circuit.
