---
title: TD2
description: Exercices d'alg√®bre relationelle
---

## 1. Description du probl√®me

Une agence de voyages veut informatiser la gestion des voyages qu'elle propose (itin√©raires, monuments visit√©s, r√©servations, etc.). 

Une base de donn√©es doit √™tre construite √† partir du cahier des charges suivant : 


* **Les circuits** : un circuit est identifi√© par un num√©ro, un nombre d'√©tapes et une s√©quence d'√©tapes. Une √©tape se d√©roule pendant un nombre donn√© de jours, dans une ville donn√©e. Au cours de chaque √©tape, tous les monuments de la ville, lorsqu'il y en a, sont visit√©s. Un m√™me circuit ne repasse jamais plusieurs fois dans la m√™me ville, mais il peut arriver que la ville de d√©part ou d'arriv√©e figure aussi parmi les villes √©tapes. Les villes sont identifi√©es par leurs noms. Les monuments sont identifi√©s par leurs noms dans la ville o√π ils sont situ√©s. 

    Un circuit peut √™tre programm√© plusieurs fois, √† des dates diff√©rentes. A chacune de ces programmations, on associe un nombre de places. Deux programmations d'un m√™me circuit peuvent avoir des nombres de places diff√©rents. Par contre, le prix d'un circuit est toujours le m√™me quelle que soit sa date de programmation. La dur√©e d'un circuit est √©gale √† la somme des dur√©es de chacune de ces √©tapes ; 
* **Les r√©servations** : une r√©servation, identifi√©e par un num√©ro, est effectu√©e pour le compte d'un client (identifi√© par son nom) et concerne une programmation d'un circuit. Plusieurs places pour la m√™me programmation du m√™me circuit peuvent √™tre r√©serv√©es en une seule fois.

## 2. Sch√©ma des tables

Le sch√©ma retenu pour la base de donn√©es est constitu√© des relations suivantes ; 

_Par convention, on <u>souligne</u> les cl√©s primaires et on indique les cl√©s √©trang√®res avec un ast√©risque *_

```ansi wrap
VILLE ([4mNOMV[0m, PAYS)
{(n, p) ‚àà VILLE ‚Üî la ville dont le nom est n, est situ√©e dans la pays p}

MONUMENT ([4mNOMM[0m, NOMV*, PRIX)
{(nm, nv, p) ‚àà MONUMENT ‚Üî le monument de nom nm est situ√© dans la ville nv. La visite co√ªte p euros}

CIRCUIT ([4mNC[0m, NBETAPES, PRIX)
{(nc, nb, p) ‚àà CIRCUIT ‚Üî le circuit est identifi√© par le num√©ro nc. Il comprend nb √©tapes et vaut p euros}

ETAPE (NOMV, [4mNC, NUMETAPE[0m, DUREE)
{(nv, nc, nu, no, d) ‚àà ETAPE ‚Üî la ville nv est la nu i√®me √©tape du circuit nc. L'√©tape dure d jours}

PROGRAMMATION ([4mNC, DATE[0m, PLACES)
{(nc, d, p) ‚àà P ROGRAMMATION ‚Üî le circuit nc est programm√© √† la date d. P places sont disponibles}

RESERVATION (NC, NR, NOMC, PLACES, DATE)
{(nc, nr, c, p, d) ‚àà RESERVATION ‚Üî le client de nom c a r√©serv√© p places pour le circuit nc commen√ßant √† la date d. Sa r√©servation est identifi√©e par le num√©ro nr}
```

Les domaines associ√©s aux diff√©rents attributs sont :

```sql wrap
domaine(NOMC) = {‚ÄúMila", ‚ÄúNathalie", ‚ÄúJohn", etc.}
domaine(NOMV) = {‚ÄúParis", ‚ÄúLondres", ‚ÄúExeter", etc.}
domaine(PAYS) = {‚ÄúFrance", ‚ÄúAngleterre", ‚ÄúIrlande", etc.}
domaine(NC) = domaine(NR) = domaine(PLACES) = domaine(PRIX) = domaine(NUMETAPE) = domaine(NBETAPES) = domaine(DUREE) = entiers ‚â• 0
domaine(DATE) = dates
```

Les contraintes d'int√©grit√© r√©f√©rentielle () sont :

```
RESERVATION[NC, DATE] ‚äÇ PROGRAMMATION[NC, DATE]
CIRCUIT[NC] = PROGRAMMATION[NC]
CIRCUIT[NC] = ETAPE[NC]
VILLE[NOMV] = ETAPE[NOMV]
MONUMENT[NOMV] ‚äÇ VILLE[NOMV]
```

<div class="page-break"></div>

## 3. Donn√©es de la base de donn√©es

![Tables 1, 2 et 3](06-td2-algebre-01-tables-123.png)
![Tables 4, 5 et 6](06-td2-algebre-02-tables-456.png)

<div class="page-break"></div>
<div class="page-break"></div>

## 4. Navigation dans la base de donn√©es

Trouver les informations suivantes dans la base de donn√©es :

1. Ville de d√©part du circuit 10 ?
2. Noms des monuments visit√©s par Mafalda ?
3. Nombre de places mises √† la vente pour le circuit 5 √† la date du 9/11/02 ?

## 5. Requ√™tes

Donner en alg√®bre relationnelle l'expression des requ√™tes suivantes :

1. Ville de d√©part du circuit 10 ?
2. Noms des monuments visit√©s par Mafalda ?
3. Donner le num√©ro, les villes de d√©part et d'arriv√©e des circuits qui d√©marrent apr√®s une date donn√©e ;
4. Donner les noms des clients qui ont r√©serv√© des circuits qui passent par un pays donn√© ;
5. Donner le nom des clients qui ne visitent aucun monument ;
6. Donner le num√©ro, le prix de base (i.e. ne tenant pas compte du prix des monuments visit√©s), et la date de d√©part des circuits qui ont encore des places disponibles ;
7. Donner le num√©ro et le prix de base des circuits qui n'ont aucune r√©servation ;
8. Donner les noms des pays, des villes et des monuments visit√©s par un client donn√© ;
9. Donner la liste des num√©ros de circuits qui passent dans toutes les villes d'un pays donn√©
10. Pour chaque circuit restant dans le m√™me pays, donner le nom de ce pays et le num√©ro de circuit.
